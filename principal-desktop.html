<html>

<head>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500&display=swap" rel="stylesheet">
    <style>
        div {
            margin-top: 5px;
            margin-bottom: 12px;
        }
        .pill {
            width: 139px;
            height: 36px;
            border-radius: 24px;
            border: solid 1px #ffffff;
        }
    </style>

<body style="font-family: Rubik;font-weight: 400">
    <p style="font-family: Rubik;font-weight: 500;font-weight: 500;">
        DESKTOP PRINCIPAL
        |
        <a href="secundario-desktop.html">DESKTOP SECUNDARIO</a>
        |
        <a href="mobile.html">MOBILE</a>
    </p>
    <canvas id="canvas" width="604" height="265"></canvas>
    <div>
        <label>Título grande</label>
        <input type="text" id="text1" value="¿ESTÁS POR VIAJAR?" />
    </div>
    <div>
        <label>Texto izquierda título (opcional)</label>
        <input type="text" id="text2title" value="Si viajas en los próximos 3 días:" />
    </div>
    <div>
        <label>Texto izquierda contenido</label>
        <textarea id="text2" rows="4" cols="50">
Puedes resolver todo online. Entra a
Mis Viajes y encuentra tus opciones
actualizadas para cambiar o
cancelar tu reserva.
</textarea>
    </div>
    <div>
        <label>Texto del botón (opcional)</label>
        <input type="text" id="button" />
    </div>
    <div>
        <label>Texto derecha título (opcional)</label>
        <input type="text" id="text3title" value="Si viajas en más de 3 días:" />
    </div>
    <div>
        <label>Texto derecha contenido</label>
        <textarea id="text3" rows="4" cols="50">
Te recomendamos a estar
más cerca de tu viaje. Agradecemos
tu colaboración así podemos ayudar a
las personas que viajan antes.
</textarea>
    </div>


    <button type="button" id="do">Generar</button>
    <a id="download" download="banner-desktop-principal.png" href="" onclick="download_img(this);">Descargar como
        PNG</a>
</body>

<script>
    function setup() {
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#4300d2";
        ctx.fillRect(0, 0, canvas.width, canvas.height);


        CanvasRenderingContext2D.prototype.roundRect = function (x, y, width, height, radius, fill, stroke) {
            var cornerRadius = { upperLeft: 0, upperRight: 0, lowerLeft: 0, lowerRight: 0 };
            if (typeof stroke == "undefined") {
                stroke = true;
            }
            if (typeof radius === "object") {
                for (var side in radius) {
                    cornerRadius[side] = radius[side];
                }
            }

            this.beginPath();
            this.moveTo(x + cornerRadius.upperLeft, y);
            this.lineTo(x + width - cornerRadius.upperRight, y);
            this.quadraticCurveTo(x + width, y, x + width, y + cornerRadius.upperRight);
            this.lineTo(x + width, y + height - cornerRadius.lowerRight);
            this.quadraticCurveTo(x + width, y + height, x + width - cornerRadius.lowerRight, y + height);
            this.lineTo(x + cornerRadius.lowerLeft, y + height);
            this.quadraticCurveTo(x, y + height, x, y + height - cornerRadius.lowerLeft);
            this.lineTo(x, y + cornerRadius.upperLeft);
            this.quadraticCurveTo(x, y, x + cornerRadius.upperLeft, y);
            this.closePath();
            if (stroke) {
                this.stroke();
            }
            if (fill) {
                this.fill();
            }
        } 
        //ctx.lineWidth = 1.5;
        //ctx.strokeStyle = "#ffffff";
        //ctx.roundRect(24, 205, 139, 36, { upperLeft: 24, upperRight: 24, lowerRight: 24, lowerLeft: 24 }, false, true);
    }

    setup();

    function addTextToImage(text1, text2title, text2, text3title, text3, buttonText) {
        var circle_canvas = document.getElementById("canvas");
        var context = circle_canvas.getContext("2d");
        setup();

        //context.lineWidth = 1;
        context.textBaseline = "top";
        context.fillStyle = "#ffffff";
        context.lineStyle = "#ffffff";
        context.font = "500 24px Rubik";
        context.fillText(text1, 24, 32);

        context.font = "500 14px Rubik";
        context.fillText(text2title, 24, 79);

        context.font = "lighter 14px Rubik";
        fillTextMultiLine(context, text2, 24, text2title ? 99 : 79);


        context.font = "500 14px Rubik";
        context.fillText(text3title, 294, 79);

        context.font = "lighter 14px Rubik";
        fillTextMultiLine(context, text3, 294, text3title ? 99 : 79);
    }


    function fillTextMultiLine(ctx, text, x, y) {
        var lineHeight = 20;
        var lines = text.split("\n");
        for (var i = 0; i < lines.length; ++i) {
            ctx.fillText(lines[i], x, y);
            y += lineHeight;
        }
    }

    document.getElementById("do").addEventListener("click", function () {
        addTextToImage(
            document.getElementById("text1").value,
            document.getElementById("text2title").value,
            document.getElementById("text2").value,
            document.getElementById("text3title").value,
            document.getElementById("text3").value,
            document.getElementById("button").value)
    });


    download_img = function (el) {
        var image = canvas.toDataURL("image/png");
        el.href = image;
    };
</script>


</html>